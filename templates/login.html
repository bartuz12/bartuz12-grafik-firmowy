{% extends "layout.html" %}

{% block title %}Logowanie{% endblock %}

{% block extra_styles %}
<style>
    /* Style spójne ze stronami uwierzytelniania */
    .auth-layout {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: calc(100vh - 150px);
        padding: 1rem;
    }
    .auth-card {
        max-width: 450px;
        width: 100%;
    }
    .card-footer-auth {
        padding: 1rem 1.5rem;
        background-color: var(--background-color);
        border-top: 1px solid var(--border-color);
        text-align: center;
        font-size: 0.9em;
    }
    .card-footer-auth a {
        color: var(--primary-color);
        text-decoration: none;
        font-weight: 600;
    }
    .card-footer-auth a:hover {
        text-decoration: underline;
    }
    .login-options {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        margin-top: -0.5rem;
    }
    .form-check {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    .form-check-input {
        width: 1rem;
        height: 1rem;
    }
    .form-check-label {
        font-size: 0.9em;
        color: var(--secondary-color);
    }
    .forgot-password-link {
        font-size: 0.9em;
        text-decoration: none;
        color: var(--secondary-color);
    }
    .forgot-password-link:hover {
        color: var(--primary-color);
        text-decoration: underline;
    }
</style>
{% endblock %}

{% block content %}
<div class="auth-layout">
    <div class="card auth-card">
        <div class="card-header">
            <h1>Zaloguj się</h1>
        </div>
        <div class="card-body">
            <!-- POPRAWKA: Używamy obiektu form przekazanego z backendu -->
            <form method="POST" action="{{ url_for('auth.login') }}">
                {{ form.hidden_tag() }} <!-- DODANIE OCHRONY CSRF -->
                
                <div class="form-group">
                    {{ form.email.label }}
                    {{ form.email(class="form-control", required=True, value=form.email.data or '') }}
                </div>
                <div class="form-group">
                    {{ form.password.label }}
                    {{ form.password(class="form-control", required=True) }}
                </div>

                <div class="login-options">
                    <div class="form-check">
                        {{ form.remember(class="form-check-input") }}
                        {{ form.remember.label(class="form-check-label") }}
                    </div>
                    <a href="{{ url_for('auth.reset_request') }}" class="forgot-password-link">Nie pamiętam hasła</a>
                </div>
                
                <button type="submit" class="button button-primary button-full-width">Zaloguj</button>
            </form>
        </div>
        <div class="card-footer-auth">
            Nie masz jeszcze konta? <a href="{{ url_for('auth.register') }}">Zarejestruj się</a>
        </div>
    </div>
</div>
{% endblock %}