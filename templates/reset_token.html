{% extends "layout.html" %}

{% block title %}Ustaw Nowe Hasło{% endblock %}

{% block extra_styles %}
<style>
    /* Style spójne ze stroną logowania */
    .auth-layout {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex-grow: 1;
        padding: 2rem; /* Zwiększony margines zewnętrzny */
    }
    .auth-card {
        max-width: 450px;
        width: 100%;
    }
    /* Zwiększone marginesy wewnętrzne dla lepszej czytelności */
    .auth-card .card-header,
    .auth-card .card-body {
        padding: 2rem;
    }
    .card-footer-auth {
        padding: 1.5rem 2rem;
        background-color: var(--background-color);
        border-top: 1px solid var(--border-color);
        text-align: center;
        font-size: 0.9em;
    }
    .card-footer-auth a {
        color: var(--primary-color);
        text-decoration: none;
        font-weight: 600;
    }
    .card-footer-auth a:hover {
        text-decoration: underline;
    }
    .info-text {
        color: var(--secondary-color);
        font-size: 0.95em;
        margin-bottom: 2rem; /* Zwiększony margines dolny */
        text-align: center;
        line-height: 1.6;
    }
</style>
{% endblock %}

{% block content %}
<div class="auth-layout">
    <div class="card auth-card">
        <div class="card-header">
            <h1>Ustaw nowe hasło</h1>
        </div>
        <div class="card-body">
            <p class="info-text">Wprowadź swoje nowe hasło poniżej. Upewnij się, że ma co najmniej 8 znaków.</p>
            <!-- POPRAWKA: Używamy obiektu form przekazanego z backendu -->
            <form method="POST" action="{{ url_for('auth.reset_token', token=token) }}">
                {{ form.hidden_tag() }} <!-- DODANIE OCHRONY CSRF -->

                <div class="form-group">
                    {{ form.password.label }}
                    {{ form.password(class="form-control", required=True, minlength=8) }}
                </div>
                <div class="form-group">
                    {{ form.confirm_password.label }}
                    {{ form.confirm_password(class="form-control", required=True, minlength=8) }}
                </div>
                <button type="submit" class="button button-primary button-full-width">Ustaw nowe hasło</button>
            </form>
        </div>
        <div class="card-footer-auth">
            <a href="{{ url_for('auth.login') }}">Wróć do logowania</a>
        </div>
    </div>
</div>
{% endblock %}
